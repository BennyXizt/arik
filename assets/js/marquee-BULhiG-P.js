const g=[],w=[y,"[data-fsc-marquee]"];function C(){const t=document.querySelectorAll("[data-fsc-marquee]");for(const e of t){if(e.getAttribute("data-fsc-marquee-initialized"))continue;const i=e.getAttribute("data-fsc-marquee-speed")?parseInt(e.getAttribute("data-fsc-marquee-speed")):1e3,o=e.getAttribute("data-fsc-marquee-direction"),d=e.getAttribute("data-fsc-marquee-start")?parseInt(e.getAttribute("data-fsc-marquee-start")):0,n=e.querySelectorAll("[data-fsc-marquee-item]"),r=Number.parseFloat(getComputedStyle(e).columnGap),l=o==="left"||o==="right"||o==="top"||o==="bottom"?o:"left";if(l==="left"||l==="right"){let f=Array.from(n).reduce((s,a)=>s+a.getBoundingClientRect().width,0)+r*(n.length-1);const h=Array.from(n),b=e.getBoundingClientRect().width,A=n.length-1;let c=0;for(;f<=b;){const s=h[c].cloneNode(!0);s.setAttribute("data-fsc-marquee-clone",""),e.appendChild(s),c=c===A?0:++c,f+=s.getBoundingClientRect().width+r}const u=e.querySelectorAll("[data-fsc-marquee-item]"),m=Array.from(u);for(const s of m){const a=s.cloneNode(!0);a.setAttribute("data-fsc-marquee-clone",""),e.appendChild(a)}g.push({root:e,dimention:f,gap:r,speed:i,offset:d,direction:l,visible:!1,animationID:void 0})}else{const f=e.getBoundingClientRect().height;g.push({root:e,dimention:f,gap:r,speed:i,offset:d,direction:l,visible:!1,animationID:void 0})}e.setAttribute("data-fsc-marquee-initialized","true")}}function y(t,e){const i=g.find(r=>r.root===t.target);if(!i)return;const o=i.root.getBoundingClientRect(),d=i.direction==="left"||i.direction==="right";let n;d?n=o.bottom>0&&o.top<window.innerHeight:n=o.right>0&&o.left<window.innerWidth,i.visible=n,i.visible&&!i.animationID&&(i.animationID=requestAnimationFrame(()=>p(i)))}function p(t){if(!t.visible){t.animationID=void 0;return}const e=t.direction==="left"||t.direction==="right";t.direction==="left"?(t.offset-=t.speed/1e3,t.offset<-t.dimention&&(t.offset=t.gap)):t.direction==="right"?(t.offset+=t.speed/1e3,t.offset>=t.gap&&(t.offset=-t.dimention)):t.direction==="top"?(t.offset-=t.speed/1e3,t.offset<-t.dimention&&(t.offset=t.gap)):t.direction==="bottom"&&(t.offset+=t.speed/1e3,t.offset>=t.gap&&(t.offset=-t.dimention)),e?t.root.style.transform=`translate3d(${t.offset}px, 0, 0)`:t.root.style.transform=`translate3d(0, ${t.offset}px, 0)`,t.animationID=requestAnimationFrame(()=>p(t))}export{C as marqueeAutoload,y as marqueeObserver,w as marqueeObserverArray};
