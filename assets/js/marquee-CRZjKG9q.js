const p=[];function x(){const t=document.querySelectorAll("[data-fsc-marquee]");for(const i of t){const e=i.querySelector("[data-fsc-marquee-list]");if(!e||e.getAttribute("data-fsc-marquee-initialized"))continue;const r=e.getAttribute("data-fsc-marquee-speed")?parseInt(e.getAttribute("data-fsc-marquee-speed")):1e3,n=e.getAttribute("data-fsc-marquee-direction"),g=e.getAttribute("data-fsc-marquee-start")?parseInt(e.getAttribute("data-fsc-marquee-start")):0,f=e.querySelectorAll("[data-fsc-marquee-item]"),d=Number.parseFloat(getComputedStyle(e).columnGap),c=n==="left"||n==="right"||n==="top"||n==="bottom"?n:"left";if(c==="left"||c==="right"){let s=Array.from(f).reduce((o,l)=>o+l.getBoundingClientRect().width,0)+d*(f.length-1);const u=Array.from(f),A=e.getBoundingClientRect().width,b=f.length-1;let a=0;for(;s<=A;){const o=u[a].cloneNode(!0);o.setAttribute("data-fsc-marquee-clone",""),e.appendChild(o),a=a===b?0:++a,s+=o.getBoundingClientRect().width+d}const m=e.querySelectorAll("[data-fsc-marquee-item]"),y=Array.from(m);for(const o of y){const l=o.cloneNode(!0);l.setAttribute("data-fsc-marquee-clone",""),e.appendChild(l)}p.push({marquee:i,root:e,dimention:s,gap:d,speed:r,offset:g,direction:c,visible:!1,animationID:void 0})}else{const s=i.getBoundingClientRect().height;p.push({marquee:i,root:e,dimention:s,gap:d,speed:r,offset:g,direction:c,visible:!1,animationID:void 0})}e.setAttribute("data-fsc-marquee-initialized","true")}}const C=[I,"[data-fsc-marquee]",{rootMargin:"50px 0px 50px 0px"}];function I(t,i){const e=p.find(r=>r.marquee===t.target);e&&(e.visible=t.isIntersecting,e.visible&&!e.animationID&&(e.animationID=requestAnimationFrame(()=>h(e))))}function h(t){if(!t.visible){t.animationID=void 0;return}const i=t.direction==="left"||t.direction==="right";t.direction==="left"?(t.offset-=t.speed/1e3,t.offset<-t.dimention&&(t.offset=t.gap)):t.direction==="right"?(t.offset+=t.speed/1e3,t.offset>=t.gap&&(t.offset=-t.dimention)):t.direction==="top"?(t.offset-=t.speed/1e3,t.offset<-t.dimention&&(t.offset=t.gap)):t.direction==="bottom"&&(t.offset+=t.speed/1e3,t.offset>=t.gap&&(t.offset=-t.dimention)),i?t.root.style.transform=`translate3d(${t.offset}px, 0, 0)`:t.root.style.transform=`translate3d(0, ${t.offset}px, 0)`,t.animationID=requestAnimationFrame(()=>h(t))}export{x as marqueeAutoload,C as marqueeObserverArray};
